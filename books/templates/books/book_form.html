{% load static %}
<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8">
  <title>{% if mode == "create" %}Нова книга{% else %}Редагування: {{ form.instance.title|default:"Книга" }}{% endif %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sанс-serif;margin:0;padding:0 1rem;}
    .wrap{max-width:720px;margin:0 auto;}
    .btn{display:inline-block;padding:.5rem .75rem;border-radius:8px;border:1px solid #ddd;text-decoration:none}
    .btn-primary{background:#0d6efd;color:#fff;border-color:#0d6efd}
    .btn-secondary{background:#f5f5f5;color:#222}
    .text-danger{color:#d00}
    input, textarea{width:100%;padding:.5rem;border:1px solid #ddd;border-radius:8px;}
    label{display:block;margin:.25rem 0 .25rem;}
    nav{display:flex;gap:.5rem;flex-wrap:wrap;margin:1rem 0 1.25rem}
    .card{padding:1.25rem;border:1px solid #eee;border-radius:12px}
  </style>
</head>
<body>
<div class="wrap">
  <nav>
    <a href="/books/catalog/" class="btn btn-secondary">← До списку</a>
    {% if mode != "create" and form.instance.slug %}
      <a href="/books/{{ form.instance.slug }}/" class="btn btn-secondary">Відкрити</a>
    {% endif %}
  </nav>

  <div class="card">
    <h1 style="margin:.25rem 0 1rem;">{% if mode == "create" %}Нова книга{% else %}Редагування книги{% endif %}</h1>

    <form method="post" novalidate>
      {% csrf_token %}
      {% if form.non_field_errors %}<div class="text-danger" style="margin-bottom:1rem;">{{ form.non_field_errors }}</div>{% endif %}

      <div style="margin-bottom:.75rem;">
        <label for="{{ form.title.id_for_label }}">Назва<span style="color:#d00;">*</span></label>
        {{ form.title }} {% if form.title.errors %}<div class="text-danger">{{ form.title.errors }}</div>{% endif %}
      </div>

      <div style="margin-bottom:.75rem;">
        <label for="{{ form.author.id_for_label }}">Автор</label>
        {{ form.author }} {% if form.author.errors %}<div class="text-danger">{{ form.author.errors }}</div>{% endif %}
      </div>

      <div style="margin-bottom:.75rem;">
        <label for="{{ form.description.id_for_label }}">Опис</label>
        {{ form.description }} {% if form.description.errors %}<div class="text-danger">{{ form.description.errors }}</div>{% endif %}
      </div>

      <div style="display:flex;gap:.5rem;flex-wrap:wrap;margin-top:1rem;">
        <button type="submit" class="btn btn-primary">{% if mode == "create" %}Створити{% else %}Зберегти{% endif %}</button>
        <a href="/books/catalog/" class="btn btn-secondary">Скасувати</a>
      </div>
    </form>

    {% if mode != "create" %}
      <hr style="margin:1.25rem 0;">
      <div style="color:#666;font-size:.9rem;">
        Створено: {{ form.instance.created|date:"Y-m-d H:i" }} • Оновлено: {{ form.instance.updated|date:"Y-m-d H:i" }}{% if form.instance.slug %} • Slug: <code>{{ form.instance.slug }}</code>{% endif %}
      </div>
    {% endif %}
  </div>
</div>
</body>
</html>
