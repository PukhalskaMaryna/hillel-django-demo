{% extends "base.html" %}
{% block title %}Файли — Мій сайт{% endblock %}
{% block content %}
  <section class="card">
    <h3>Завантажити файл (os + shutil)</h3>
    <form method="post" enctype="multipart/form-data">
      {% csrf_token %}
      <input type="file" name="file" required>
      <button class="btn" type="submit">Завантажити</button>
    </form>
    <p class="small">Оригінали: <code>media/uploads/</code>, копії: <code>media/backup/</code></p>
    {% if msg %}<p><strong>{{ msg }}</strong></p>{% endif %}
  </section>

  <div class="grid">
    <section class="card">
      <h3>Оригінали (uploads)</h3>
      {% if uploads %}
        <table>
          <thead><tr><th>Файл</th><th>Розмір</th><th>Відкрити</th></tr></thead>
          <tbody>
          {% for f in uploads %}
            <tr>
              <td>{{ f.name }}</td>
              <td>{{ f.size }}</td>
              <td><a href="{{ f.url }}" target="_blank">переглянути</a></td>
            </tr>
          {% endfor %}
          </tbody>
        </table>
      {% else %}
        <p class="small">Ще немає файлів.</p>
      {% endif %}
    </section>

    <section class="card">
      <h3>Копії (backup)</h3>
      {% if backups %}
        <table>
          <thead><tr><th>Файл</th><th>Розмір</th><th>Відкрити</th></tr></thead>
          <tbody>
          {% for f in backups %}
            <tr>
              <td>{{ f.name }}</td>
              <td>{{ f.size }}</td>
              <td><a href="{{ f.url }}" target="_blank">переглянути</a></td>
            </tr>
          {% endfor %}
          </tbody>
        </table>
      {% else %}
        <p class="small">Ще немає копій.</p>
      {% endif %}
    </section>
  </div>
{% endblock %}
